^C(env) fakhar@DESKTOP-9H42JH4:/mnt/e/cortexAI/cortex$ python manual_pooler_test.py

================================================================================
 INTERACTIVE POOLER TEST
================================================================================

This tool allows you to test conversations with different backends and models.

Available backends:
  - pooler : Supabase pooler (tests concurrency issues)
  - local  : Local PostgreSQL
  - sqlite : SQLite (default)

Available models:
  - gpt-4o-mini
  - gemini-1.5-flash
  - command-r
  - claude-3-haiku
================================================================================

Current settings:
  Backend: pooler
  Model: gpt-4o-mini
  Conversation ID: New conversation

Commands:
  /backend <name>  - Switch backend (pooler/local/sqlite)
  /model <name>    - Switch model
  /new             - Start new conversation
  /instructions    - Set system instructions
  /test            - Test current setup with a simple message
  /alternate       - Test alternating between GPT and Gemini
  /quit            - Exit

  Or just type your message...

> /model command-r
✅ Switched to model: command-r
================================================================================

Current settings:
  Backend: pooler
  Model: command-r
  Conversation ID: New conversation

Commands:
  /backend <name>  - Switch backend (pooler/local/sqlite)
  /model <name>    - Switch model
  /new             - Start new conversation
  /instructions    - Set system instructions
  /test            - Test current setup with a simple message
  /alternate       - Test alternating between GPT and Gemini
  /quit            - Exit

  Or just type your message...

> i am hassan and i like black color

================================================================================
 MANUAL CONVERSATION TEST
================================================================================
[TEST] Parameters:
  - Backend: pooler
  - Model: command-r
  - Message: i am hassan and i like black color...
  - Instructions: Yes
  - Previous Response ID: None (new conversation)
[BACKEND] Using Pooler: aws-1-ap-southeast-1.pooler.supabase.com:6543/postgres

[TEST] Initializing client...
✅ Connecting to PostgreSQL database...
📌 Detected connection pooler - disabling prepared statements
   Using exact URL: postgresql://postgres.tqovtjyylrykgpehbfdl:Fakhar_27_1$@aws-...
✅ Successfully connected to PostgreSQL

[TEST] Request parameters:
  - model: command-r
  - store: True
  - temperature: 0.7
  - instructions: You are a helpful assistant.

[TEST] Making API call...

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_c4b9f3193afa
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_c4b9f3193afa
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_c4b9f3193afa
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

[TEST] ✅ Response received in 5.12s
  - Response ID: resp_c4b9f3193afa
  - Status: completed

[RESPONSE] Hello Hassan! Black is a great color. It's classic, sleek, and sophisticated. It's also versatile and can be worn to many different occasions. It's a popular choice for many people and it's easy to se...

✅ Response ID saved: resp_c4b9f3193afa
================================================================================

Current settings:
  Backend: pooler
  Model: command-r
  Conversation ID: resp_c4b9f3193afa

Commands:
  /backend <name>  - Switch backend (pooler/local/sqlite)
  /model <name>    - Switch model
  /new             - Start new conversation
  /instructions    - Set system instructions
  /test            - Test current setup with a simple message
  /alternate       - Test alternating between GPT and Gemini
  /quit            - Exit

  Or just type your message...

> /model gpt-4o-mini
✅ Switched to model: gpt-4o-mini
================================================================================

Current settings:
  Backend: pooler
  Model: gpt-4o-mini
  Conversation ID: resp_c4b9f3193afa

Commands:
  /backend <name>  - Switch backend (pooler/local/sqlite)
  /model <name>    - Switch model
  /new             - Start new conversation
  /instructions    - Set system instructions
  /test            - Test current setup with a simple message
  /alternate       - Test alternating between GPT and Gemini
  /quit            - Exit

  Or just type your message...

> who am i and what color do i like

================================================================================
 MANUAL CONVERSATION TEST
================================================================================
[TEST] Parameters:
  - Backend: pooler
  - Model: gpt-4o-mini
  - Message: who am i and what color do i like...
  - Instructions: Yes
  - Previous Response ID: resp_c4b9f3193afa
[BACKEND] Using Pooler: aws-1-ap-southeast-1.pooler.supabase.com:6543/postgres

[TEST] Initializing client...
✅ Connecting to PostgreSQL database...
📌 Detected connection pooler - disabling prepared statements
   Using exact URL: postgresql://postgres.tqovtjyylrykgpehbfdl:Fakhar_27_1$@aws-...
✅ Successfully connected to PostgreSQL

[TEST] Request parameters:
  - model: gpt-4o-mini
  - store: True
  - temperature: 0.7
  - instructions: You are a helpful assistant.
  - previous_response_id: resp_c4b9f3193afa

[TEST] Making API call...

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_64a96a97e223
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_64a96a97e223
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_64a96a97e223
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

[TEST] ✅ Response received in 10.09s
  - Response ID: resp_64a96a97e223
  - Status: completed

[RESPONSE] You are Hassan, and you like the color black!

✅ Response ID saved: resp_64a96a97e223
================================================================================

Current settings:
  Backend: pooler
  Model: gpt-4o-mini
  Conversation ID: resp_64a96a97e223

Commands:
  /backend <name>  - Switch backend (pooler/local/sqlite)
  /model <name>    - Switch model
  /new             - Start new conversation
  /instructions    - Set system instructions
  /test            - Test current setup with a simple message
  /alternate       - Test alternating between GPT and Gemini
  /quit            - Exit

  Or just type your message...

> /model gemini-1.5-flash
✅ Switched to model: gemini-1.5-flash
================================================================================

Current settings:
  Backend: pooler
  Model: gemini-1.5-flash
  Conversation ID: resp_64a96a97e223

Commands:
  /backend <name>  - Switch backend (pooler/local/sqlite)
  /model <name>    - Switch model
  /new             - Start new conversation
  /instructions    - Set system instructions
  /test            - Test current setup with a simple message
  /alternate       - Test alternating between GPT and Gemini
  /quit            - Exit

  Or just type your message...

> who am i and what color do i like

================================================================================
 MANUAL CONVERSATION TEST
================================================================================
[TEST] Parameters:
  - Backend: pooler
  - Model: gemini-1.5-flash
  - Message: who am i and what color do i like...
  - Instructions: Yes
  - Previous Response ID: resp_64a96a97e223
[BACKEND] Using Pooler: aws-1-ap-southeast-1.pooler.supabase.com:6543/postgres

[TEST] Initializing client...
✅ Connecting to PostgreSQL database...
📌 Detected connection pooler - disabling prepared statements
   Using exact URL: postgresql://postgres.tqovtjyylrykgpehbfdl:Fakhar_27_1$@aws-...
✅ Successfully connected to PostgreSQL

[TEST] Request parameters:
  - model: gemini-1.5-flash
  - store: True
  - temperature: 0.7
  - instructions: You are a helpful assistant.
  - previous_response_id: resp_64a96a97e223

[TEST] Making API call...

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_62355c45c6c5
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_62355c45c6c5
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_62355c45c6c5
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

[TEST] ✅ Response received in 6.86s
  - Response ID: resp_62355c45c6c5
  - Status: completed

[RESPONSE] I don't know who you are or what color you like.  I have no memory of past conversations.  To answer your question, you'll need to tell me.

✅ Response ID saved: resp_62355c45c6c5
================================================================================

Current settings:
  Backend: pooler
  Model: gemini-1.5-flash
  Conversation ID: resp_62355c45c6c5

Commands:
  /backend <name>  - Switch backend (pooler/local/sqlite)
  /model <name>    - Switch model
  /new             - Start new conversation
  /instructions    - Set system instructions
  /test            - Test current setup with a simple message
  /alternate       - Test alternating between GPT and Gemini
  /quit            - Exit

  Or just type your message...

> i like number 7

================================================================================
 MANUAL CONVERSATION TEST
================================================================================
[TEST] Parameters:
  - Backend: pooler
  - Model: gemini-1.5-flash
  - Message: i like number 7...
  - Instructions: Yes
  - Previous Response ID: resp_62355c45c6c5
[BACKEND] Using Pooler: aws-1-ap-southeast-1.pooler.supabase.com:6543/postgres

[TEST] Initializing client...
✅ Connecting to PostgreSQL database...
📌 Detected connection pooler - disabling prepared statements
   Using exact URL: postgresql://postgres.tqovtjyylrykgpehbfdl:Fakhar_27_1$@aws-...
✅ Successfully connected to PostgreSQL

[TEST] Request parameters:
  - model: gemini-1.5-flash
  - store: True
  - temperature: 0.7
  - instructions: You are a helpful assistant.
  - previous_response_id: resp_62355c45c6c5

[TEST] Making API call...

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_344230f02c2c
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_344230f02c2c
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_344230f02c2c
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

[TEST] ✅ Response received in 6.53s
  - Response ID: resp_344230f02c2c
  - Status: completed

[RESPONSE] Okay, you like the number 7.  Is there anything else you'd like to share?

✅ Response ID saved: resp_344230f02c2c
================================================================================

Current settings:
  Backend: pooler
  Model: gemini-1.5-flash
  Conversation ID: resp_344230f02c2c

Commands:
  /backend <name>  - Switch backend (pooler/local/sqlite)
  /model <name>    - Switch model
  /new             - Start new conversation
  /instructions    - Set system instructions
  /test            - Test current setup with a simple message
  /alternate       - Test alternating between GPT and Gemini
  /quit            - Exit

  Or just type your message...

> /model command-r
✅ Switched to model: command-r
================================================================================

Current settings:
  Backend: pooler
  Model: command-r
  Conversation ID: resp_344230f02c2c

Commands:
  /backend <name>  - Switch backend (pooler/local/sqlite)
  /model <name>    - Switch model
  /new             - Start new conversation
  /instructions    - Set system instructions
  /test            - Test current setup with a simple message
  /alternate       - Test alternating between GPT and Gemini
  /quit            - Exit

  Or just type your message...

> what number do i like

================================================================================
 MANUAL CONVERSATION TEST
================================================================================
[TEST] Parameters:
  - Backend: pooler
  - Model: command-r
  - Message: what number do i like...
  - Instructions: Yes
  - Previous Response ID: resp_344230f02c2c
[BACKEND] Using Pooler: aws-1-ap-southeast-1.pooler.supabase.com:6543/postgres

[TEST] Initializing client...
✅ Connecting to PostgreSQL database...
📌 Detected connection pooler - disabling prepared statements
   Using exact URL: postgresql://postgres.tqovtjyylrykgpehbfdl:Fakhar_27_1$@aws-...
✅ Successfully connected to PostgreSQL

[TEST] Request parameters:
  - model: command-r
  - store: True
  - temperature: 0.7
  - instructions: You are a helpful assistant.
  - previous_response_id: resp_344230f02c2c

[TEST] Making API call...

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_e5ec4ee63d0e
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_e5ec4ee63d0e
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_e5ec4ee63d0e
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

[TEST] ✅ Response received in 6.65s
  - Response ID: resp_e5ec4ee63d0e
  - Status: completed

[RESPONSE] You like the number 7! It's a prime number and has a very special significance in mathematics. It's also the number of days in a week, which makes it quite a magical number.  Some people consider it a...

✅ Response ID saved: resp_e5ec4ee63d0e
================================================================================

Current settings:
  Backend: pooler
  Model: command-r
  Conversation ID: resp_e5ec4ee63d0e

Commands:
  /backend <name>  - Switch backend (pooler/local/sqlite)
  /model <name>    - Switch model
  /new             - Start new conversation
  /instructions    - Set system instructions
  /test            - Test current setup with a simple message
  /alternate       - Test alternating between GPT and Gemini
  /quit            - Exit

  Or just type your message...

> /model gpt-4o-mini
✅ Switched to model: gpt-4o-mini
================================================================================

Current settings:
  Backend: pooler
  Model: gpt-4o-mini
  Conversation ID: resp_e5ec4ee63d0e

Commands:
  /backend <name>  - Switch backend (pooler/local/sqlite)
  /model <name>    - Switch model
  /new             - Start new conversation
  /instructions    - Set system instructions
  /test            - Test current setup with a simple message
  /alternate       - Test alternating between GPT and Gemini
  /quit            - Exit

  Or just type your message...

> what number do i like

================================================================================
 MANUAL CONVERSATION TEST
================================================================================
[TEST] Parameters:
  - Backend: pooler
  - Model: gpt-4o-mini
  - Message: what number do i like...
  - Instructions: Yes
  - Previous Response ID: resp_e5ec4ee63d0e
[BACKEND] Using Pooler: aws-1-ap-southeast-1.pooler.supabase.com:6543/postgres

[TEST] Initializing client...
✅ Connecting to PostgreSQL database...
📌 Detected connection pooler - disabling prepared statements
   Using exact URL: postgresql://postgres.tqovtjyylrykgpehbfdl:Fakhar_27_1$@aws-...
✅ Successfully connected to PostgreSQL

[TEST] Request parameters:
  - model: gpt-4o-mini
  - store: True
  - temperature: 0.7
  - instructions: You are a helpful assistant.
  - previous_response_id: resp_e5ec4ee63d0e

[TEST] Making API call...

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_4a0147a451c0
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_4a0147a451c0
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_4a0147a451c0
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

[TEST] ✅ Response received in 6.98s
  - Response ID: resp_4a0147a451c0
  - Status: completed

[RESPONSE] You like the number 7!

✅ Response ID saved: resp_4a0147a451c0
================================================================================

Current settings:
  Backend: pooler
  Model: gpt-4o-mini
  Conversation ID: resp_4a0147a451c0

Commands:
  /backend <name>  - Switch backend (pooler/local/sqlite)
  /model <name>    - Switch model
  /new             - Start new conversation
  /instructions    - Set system instructions
  /test            - Test current setup with a simple message
  /alternate       - Test alternating between GPT and Gemini
  /quit            - Exit

  Or just type your message...

> /model gemini-1.5-flash
✅ Switched to model: gemini-1.5-flash
================================================================================

Current settings:
  Backend: pooler
  Model: gemini-1.5-flash
  Conversation ID: resp_4a0147a451c0

Commands:
  /backend <name>  - Switch backend (pooler/local/sqlite)
  /model <name>    - Switch model
  /new             - Start new conversation
  /instructions    - Set system instructions
  /test            - Test current setup with a simple message
  /alternate       - Test alternating between GPT and Gemini
  /quit            - Exit

  Or just type your message...

> what number do i like

================================================================================
 MANUAL CONVERSATION TEST
================================================================================
[TEST] Parameters:
  - Backend: pooler
  - Model: gemini-1.5-flash
  - Message: what number do i like...
  - Instructions: Yes
  - Previous Response ID: resp_4a0147a451c0
[BACKEND] Using Pooler: aws-1-ap-southeast-1.pooler.supabase.com:6543/postgres

[TEST] Initializing client...
✅ Connecting to PostgreSQL database...
📌 Detected connection pooler - disabling prepared statements
   Using exact URL: postgresql://postgres.tqovtjyylrykgpehbfdl:Fakhar_27_1$@aws-...
✅ Successfully connected to PostgreSQL

[TEST] Request parameters:
  - model: gemini-1.5-flash
  - store: True
  - temperature: 0.7
  - instructions: You are a helpful assistant.
  - previous_response_id: resp_4a0147a451c0

[TEST] Making API call...

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_18e7afc0fa91
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_18e7afc0fa91
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_18e7afc0fa91
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

[TEST] ✅ Response received in 7.13s
  - Response ID: resp_18e7afc0fa91
  - Status: completed

[RESPONSE] Based on our previous conversation, you like the number 7.

✅ Response ID saved: resp_18e7afc0fa91
================================================================================

Current settings:
  Backend: pooler
  Model: gemini-1.5-flash
  Conversation ID: resp_18e7afc0fa91

Commands:
  /backend <name>  - Switch backend (pooler/local/sqlite)
  /model <name>    - Switch model
  /new             - Start new conversation
  /instructions    - Set system instructions
  /test            - Test current setup with a simple message
  /alternate       - Test alternating between GPT and Gemini
  /quit            - Exit

  Or just type your message...

  > /model gpt-4o-mini
✅ Switched to model: gpt-4o-mini
================================================================================

Current settings:
  Backend: pooler
  Model: gpt-4o-mini
  Conversation ID: resp_18e7afc0fa91

Commands:
  /backend <name>  - Switch backend (pooler/local/sqlite)
  /model <name>    - Switch model
  /new             - Start new conversation
  /instructions    - Set system instructions
  /test            - Test current setup with a simple message
  /alternate       - Test alternating between GPT and Gemini
  /quit            - Exit

  Or just type your message...

> who am i and what color do i like and which number do i like and the person i love is sara

================================================================================
 MANUAL CONVERSATION TEST
================================================================================
[TEST] Parameters:
  - Backend: pooler
  - Model: gpt-4o-mini
  - Message: who am i and what color do i like and which number do i like and the person i love is sara...
  - Instructions: Yes
  - Previous Response ID: resp_18e7afc0fa91
[BACKEND] Using Pooler: aws-1-ap-southeast-1.pooler.supabase.com:6543/postgres

[TEST] Initializing client...
✅ Connecting to PostgreSQL database...
📌 Detected connection pooler - disabling prepared statements
   Using exact URL: postgresql://postgres.tqovtjyylrykgpehbfdl:Fakhar_27_1$@aws-...
✅ Successfully connected to PostgreSQL

[TEST] Request parameters:
  - model: gpt-4o-mini
  - store: True
  - temperature: 0.7
  - instructions: You are a helpful assistant.
  - previous_response_id: resp_18e7afc0fa91

[TEST] Making API call...

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_15093d4d508a
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_15093d4d508a
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_15093d4d508a
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

[TEST] ✅ Response received in 6.56s
  - Response ID: resp_15093d4d508a
  - Status: completed

[RESPONSE] You are Hassan, you like the color black, your favorite number is 7, and the person you love is Sara.  If there's anything else you'd like to share or talk about, feel free!

✅ Response ID saved: resp_15093d4d508a
================================================================================

Current settings:
  Backend: pooler
  Model: gpt-4o-mini
  Conversation ID: resp_15093d4d508a

Commands:
  /backend <name>  - Switch backend (pooler/local/sqlite)
  /model <name>    - Switch model
  /new             - Start new conversation
  /instructions    - Set system instructions
  /test            - Test current setup with a simple message
  /alternate       - Test alternating between GPT and Gemini
  /quit            - Exit

  Or just type your message...

> /model command-r
✅ Switched to model: command-r
================================================================================

Current settings:
  Backend: pooler
  Model: command-r
  Conversation ID: resp_15093d4d508a

Commands:
  /backend <name>  - Switch backend (pooler/local/sqlite)
  /model <name>    - Switch model
  /new             - Start new conversation
  /instructions    - Set system instructions
  /test            - Test current setup with a simple message
  /alternate       - Test alternating between GPT and Gemini
  /quit            - Exit

  Or just type your message...

> which person do i like

================================================================================
 MANUAL CONVERSATION TEST
================================================================================
[TEST] Parameters:
  - Backend: pooler
  - Model: command-r
  - Message: which person do i like...
  - Instructions: Yes
  - Previous Response ID: resp_15093d4d508a
[BACKEND] Using Pooler: aws-1-ap-southeast-1.pooler.supabase.com:6543/postgres

[TEST] Initializing client...
✅ Connecting to PostgreSQL database...
📌 Detected connection pooler - disabling prepared statements
   Using exact URL: postgresql://postgres.tqovtjyylrykgpehbfdl:Fakhar_27_1$@aws-...
✅ Successfully connected to PostgreSQL

[TEST] Request parameters:
  - model: command-r
  - store: True
  - temperature: 0.7
  - instructions: You are a helpful assistant.
  - previous_response_id: resp_15093d4d508a

[TEST] Making API call...

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_29e3075d8ceb
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_29e3075d8ceb
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_29e3075d8ceb
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

[TEST] ✅ Response received in 6.76s
  - Response ID: resp_29e3075d8ceb
  - Status: completed

[RESPONSE] You have mentioned that you love Sara. However, it's not entirely clear if you meant platonically or romantically. Love is a complex emotion, and it can manifest in different ways. Do you want to talk...

✅ Response ID saved: resp_29e3075d8ceb
================================================================================

Current settings:
  Backend: pooler
  Model: command-r
  Conversation ID: resp_29e3075d8ceb

Commands:
  /backend <name>  - Switch backend (pooler/local/sqlite)
  /model <name>    - Switch model
  /new             - Start new conversation
  /instructions    - Set system instructions
  /test            - Test current setup with a simple message
  /alternate       - Test alternating between GPT and Gemini
  /quit            - Exit

  Or just type your message...

> /model gemini-1.5-flash
✅ Switched to model: gemini-1.5-flash
================================================================================

Current settings:
  Backend: pooler
  Model: gemini-1.5-flash
  Conversation ID: resp_29e3075d8ceb

Commands:
  /backend <name>  - Switch backend (pooler/local/sqlite)
  /model <name>    - Switch model
  /new             - Start new conversation
  /instructions    - Set system instructions
  /test            - Test current setup with a simple message
  /alternate       - Test alternating between GPT and Gemini
  /quit            - Exit

  Or just type your message...

> which person do i like

================================================================================
 MANUAL CONVERSATION TEST
================================================================================
[TEST] Parameters:
  - Backend: pooler
  - Model: gemini-1.5-flash
  - Message: which person do i like...
  - Instructions: Yes
  - Previous Response ID: resp_29e3075d8ceb
[BACKEND] Using Pooler: aws-1-ap-southeast-1.pooler.supabase.com:6543/postgres

[TEST] Initializing client...
✅ Connecting to PostgreSQL database...
📌 Detected connection pooler - disabling prepared statements
   Using exact URL: postgresql://postgres.tqovtjyylrykgpehbfdl:Fakhar_27_1$@aws-...
✅ Successfully connected to PostgreSQL

[TEST] Request parameters:
  - model: gemini-1.5-flash
  - store: True
  - temperature: 0.7
  - instructions: You are a helpful assistant.
  - previous_response_id: resp_29e3075d8ceb

[TEST] Making API call...

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_7fa9535dc982
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_7fa9535dc982
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_7fa9535dc982
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

[TEST] ✅ Response received in 7.34s
  - Response ID: resp_7fa9535dc982
  - Status: completed

[RESPONSE] Based on our conversation, you like Sara.

✅ Response ID saved: resp_7fa9535dc982
================================================================================

Current settings:
  Backend: pooler
  Model: gemini-1.5-flash
  Conversation ID: resp_7fa9535dc982

Commands:
  /backend <name>  - Switch backend (pooler/local/sqlite)
  /model <name>    - Switch model
  /new             - Start new conversation
  /instructions    - Set system instructions
  /test            - Test current setup with a simple message
  /alternate       - Test alternating between GPT and Gemini
  /quit            - Exit

  Or just type your message...

> ok i do not like ahmed 

================================================================================
 MANUAL CONVERSATION TEST
================================================================================
[TEST] Parameters:
  - Backend: pooler
  - Model: gemini-1.5-flash
  - Message: ok i do not like ahmed...
  - Instructions: Yes
  - Previous Response ID: resp_7fa9535dc982
[BACKEND] Using Pooler: aws-1-ap-southeast-1.pooler.supabase.com:6543/postgres

[TEST] Initializing client...
✅ Connecting to PostgreSQL database...
📌 Detected connection pooler - disabling prepared statements
   Using exact URL: postgresql://postgres.tqovtjyylrykgpehbfdl:Fakhar_27_1$@aws-...
✅ Successfully connected to PostgreSQL

[TEST] Request parameters:
  - model: gemini-1.5-flash
  - store: True
  - temperature: 0.7
  - instructions: You are a helpful assistant.
  - previous_response_id: resp_7fa9535dc982

[TEST] Making API call...

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_ba29941e6e2f
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_ba29941e6e2f
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_ba29941e6e2f
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

[TEST] ✅ Response received in 6.62s
  - Response ID: resp_ba29941e6e2f
  - Status: completed

[RESPONSE] Okay, you don't like Ahmed.  Is there anything else you'd like to tell me?

✅ Response ID saved: resp_ba29941e6e2f
================================================================================

Current settings:
  Backend: pooler
  Model: gemini-1.5-flash
  Conversation ID: resp_ba29941e6e2f

Commands:
  /backend <name>  - Switch backend (pooler/local/sqlite)
  /model <name>    - Switch model
  /new             - Start new conversation
  /instructions    - Set system instructions
  /test            - Test current setup with a simple message
  /alternate       - Test alternating between GPT and Gemini
  /quit            - Exit

  Or just type your message...

> /model command-r
✅ Switched to model: command-r
================================================================================

Current settings:
  Backend: pooler
  Model: command-r
  Conversation ID: resp_ba29941e6e2f

Commands:
  /backend <name>  - Switch backend (pooler/local/sqlite)
  /model <name>    - Switch model
  /new             - Start new conversation
  /instructions    - Set system instructions
  /test            - Test current setup with a simple message
  /alternate       - Test alternating between GPT and Gemini
  /quit            - Exit

  Or just type your message...

> who do i not like

================================================================================
 MANUAL CONVERSATION TEST
================================================================================
[TEST] Parameters:
  - Backend: pooler
  - Model: command-r
  - Message: who do i not like...
  - Instructions: Yes
  - Previous Response ID: resp_ba29941e6e2f
[BACKEND] Using Pooler: aws-1-ap-southeast-1.pooler.supabase.com:6543/postgres

[TEST] Initializing client...
✅ Connecting to PostgreSQL database...
📌 Detected connection pooler - disabling prepared statements
   Using exact URL: postgresql://postgres.tqovtjyylrykgpehbfdl:Fakhar_27_1$@aws-...
✅ Successfully connected to PostgreSQL

[TEST] Request parameters:
  - model: command-r
  - store: True
  - temperature: 0.7
  - instructions: You are a helpful assistant.
  - previous_response_id: resp_ba29941e6e2f

[TEST] Making API call...

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_4807056f1f9c
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_4807056f1f9c
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_4807056f1f9c
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

[TEST] ✅ Response received in 6.92s
  - Response ID: resp_4807056f1f9c
  - Status: completed

[RESPONSE] You've mentioned that you don't like Ahmed. You seem pretty sure about your feelings, so it's best to respect your sentiments and not make any assumptions. It's totally fine to have different opinions...

✅ Response ID saved: resp_4807056f1f9c
================================================================================

Current settings:
  Backend: pooler
  Model: command-r
  Conversation ID: resp_4807056f1f9c

Commands:
  /backend <name>  - Switch backend (pooler/local/sqlite)
  /model <name>    - Switch model
  /new             - Start new conversation
  /instructions    - Set system instructions
  /test            - Test current setup with a simple message
  /alternate       - Test alternating between GPT and Gemini
  /quit            - Exit

  Or just type your message...

> /model gpt-4o-mini
✅ Switched to model: gpt-4o-mini
================================================================================

Current settings:
  Backend: pooler
  Model: gpt-4o-mini
  Conversation ID: resp_4807056f1f9c

Commands:
  /backend <name>  - Switch backend (pooler/local/sqlite)
  /model <name>    - Switch model
  /new             - Start new conversation
  /instructions    - Set system instructions
  /test            - Test current setup with a simple message
  /alternate       - Test alternating between GPT and Gemini
  /quit            - Exit

  Or just type your message...

> who do i not like

================================================================================
 MANUAL CONVERSATION TEST
================================================================================
[TEST] Parameters:
  - Backend: pooler
  - Model: gpt-4o-mini
  - Message: who do i not like...
  - Instructions: Yes
  - Previous Response ID: resp_4807056f1f9c
[BACKEND] Using Pooler: aws-1-ap-southeast-1.pooler.supabase.com:6543/postgres

[TEST] Initializing client...
✅ Connecting to PostgreSQL database...
📌 Detected connection pooler - disabling prepared statements
   Using exact URL: postgresql://postgres.tqovtjyylrykgpehbfdl:Fakhar_27_1$@aws-...
✅ Successfully connected to PostgreSQL

[TEST] Request parameters:
  - model: gpt-4o-mini
  - store: True
  - temperature: 0.7
  - instructions: You are a helpful assistant.
  - previous_response_id: resp_4807056f1f9c

[TEST] Making API call...

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_a4e4a383b12b
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_a4e4a383b12b
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_a4e4a383b12b
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

[TEST] ✅ Response received in 7.33s
  - Response ID: resp_a4e4a383b12b
  - Status: completed

[RESPONSE] You do not like Ahmed.

✅ Response ID saved: resp_a4e4a383b12b
================================================================================

Current settings:
  Backend: pooler
  Model: gpt-4o-mini
  Conversation ID: resp_a4e4a383b12b

Commands:
  /backend <name>  - Switch backend (pooler/local/sqlite)
  /model <name>    - Switch model
  /new             - Start new conversation
  /instructions    - Set system instructions
  /test            - Test current setup with a simple message
  /alternate       - Test alternating between GPT and Gemini
  /quit            - Exit

  Or just type your message...

  > my favourite show is cowboy bepop

================================================================================
 MANUAL CONVERSATION TEST
================================================================================
[TEST] Parameters:
  - Backend: pooler
  - Model: gpt-4o-mini
  - Message: my favourite show is cowboy bepop...
  - Instructions: Yes
  - Previous Response ID: resp_a4e4a383b12b
[BACKEND] Using Pooler: aws-1-ap-southeast-1.pooler.supabase.com:6543/postgres

[TEST] Initializing client...
✅ Connecting to PostgreSQL database...
📌 Detected connection pooler - disabling prepared statements
   Using exact URL: postgresql://postgres.tqovtjyylrykgpehbfdl:Fakhar_27_1$@aws-...
✅ Successfully connected to PostgreSQL

[TEST] Request parameters:
  - model: gpt-4o-mini
  - store: True
  - temperature: 0.7
  - instructions: You are a helpful assistant.
  - previous_response_id: resp_a4e4a383b12b

[TEST] Making API call...

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_55c478b332c9
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_55c478b332c9
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_55c478b332c9
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

[TEST] ✅ Response received in 7.17s
  - Response ID: resp_55c478b332c9
  - Status: completed

[RESPONSE] Great choice! "Cowboy Bebop" is a classic anime known for its unique blend of sci-fi, western, and noir elements, along with a fantastic soundtrack. The characters, especially Spike Spiegel, Jet Black...

✅ Response ID saved: resp_55c478b332c9
================================================================================

Current settings:
  Backend: pooler
  Model: gpt-4o-mini
  Conversation ID: resp_55c478b332c9

Commands:
  /backend <name>  - Switch backend (pooler/local/sqlite)
  /model <name>    - Switch model
  /new             - Start new conversation
  /instructions    - Set system instructions
  /test            - Test current setup with a simple message
  /alternate       - Test alternating between GPT and Gemini
  /quit            - Exit

  Or just type your message...

> /model command-r
✅ Switched to model: command-r
================================================================================

Current settings:
  Backend: pooler
  Model: command-r
  Conversation ID: resp_55c478b332c9

Commands:
  /backend <name>  - Switch backend (pooler/local/sqlite)
  /model <name>    - Switch model
  /new             - Start new conversation
  /instructions    - Set system instructions
  /test            - Test current setup with a simple message
  /alternate       - Test alternating between GPT and Gemini
  /quit            - Exit

  Or just type your message...

> so far what have we discuuses liek who am i what do i like not like which colors i prewfer and my favourite show?

================================================================================
 MANUAL CONVERSATION TEST
================================================================================
[TEST] Parameters:
  - Backend: pooler
  - Model: command-r
  - Message: so far what have we discuuses liek who am i what do i like not like which colors i prewfer and my fa...
  - Instructions: Yes
  - Previous Response ID: resp_55c478b332c9
[BACKEND] Using Pooler: aws-1-ap-southeast-1.pooler.supabase.com:6543/postgres

[TEST] Initializing client...
✅ Connecting to PostgreSQL database...
📌 Detected connection pooler - disabling prepared statements
   Using exact URL: postgresql://postgres.tqovtjyylrykgpehbfdl:Fakhar_27_1$@aws-...
✅ Successfully connected to PostgreSQL

[TEST] Request parameters:
  - model: command-r
  - store: True
  - temperature: 0.7
  - instructions: You are a helpful assistant.
  - previous_response_id: resp_55c478b332c9

[TEST] Making API call...

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_a1ff0dce2cbd
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_a1ff0dce2cbd
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_a1ff0dce2cbd
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

[TEST] ✅ Response received in 6.88s
  - Response ID: resp_a1ff0dce2cbd
  - Status: completed

[RESPONSE] That's right! We've discussed several topics, including your name, which is Hassan. You've shared your favorite color, which is black, and your least favorite color is Ahmed. You also mentioned your f...

✅ Response ID saved: resp_a1ff0dce2cbd
================================================================================

Current settings:
  Backend: pooler
  Model: command-r
  Conversation ID: resp_a1ff0dce2cbd

Commands:
  /backend <name>  - Switch backend (pooler/local/sqlite)
  /model <name>    - Switch model
  /new             - Start new conversation
  /instructions    - Set system instructions
  /test            - Test current setup with a simple message
  /alternate       - Test alternating between GPT and Gemini
  /quit            - Exit

  Or just type your message...

> /model gemini-1.5-flash
✅ Switched to model: gemini-1.5-flash
================================================================================

Current settings:
  Backend: pooler
  Model: gemini-1.5-flash
  Conversation ID: resp_a1ff0dce2cbd

Commands:
  /backend <name>  - Switch backend (pooler/local/sqlite)
  /model <name>    - Switch model
  /new             - Start new conversation
  /instructions    - Set system instructions
  /test            - Test current setup with a simple message
  /alternate       - Test alternating between GPT and Gemini
  /quit            - Exit

  Or just type your message...

> which show do i like and who do i like as a person and what is my name 

================================================================================
 MANUAL CONVERSATION TEST
================================================================================
[TEST] Parameters:
  - Backend: pooler
  - Model: gemini-1.5-flash
  - Message: which show do i like and who do i like as a person and what is my name...
  - Instructions: Yes
  - Previous Response ID: resp_a1ff0dce2cbd
[BACKEND] Using Pooler: aws-1-ap-southeast-1.pooler.supabase.com:6543/postgres

[TEST] Initializing client...
✅ Connecting to PostgreSQL database...
📌 Detected connection pooler - disabling prepared statements
   Using exact URL: postgresql://postgres.tqovtjyylrykgpehbfdl:Fakhar_27_1$@aws-...
✅ Successfully connected to PostgreSQL

[TEST] Request parameters:
  - model: gemini-1.5-flash
  - store: True
  - temperature: 0.7
  - instructions: You are a helpful assistant.
  - previous_response_id: resp_a1ff0dce2cbd

[TEST] Making API call...

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_b3c814b9502c
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_b3c814b9502c
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

🔍 DEBUG: Attempting to save checkpoint:
   Thread ID: resp_c4b9f3193afa
   Response ID: resp_b3c814b9502c
   Config has checkpoint_ns: True
   🔒 Acquiring lock for pooled connection save...
   ✅ PostgresSaver.put() returned successfully
   ✅ Explicitly committed transaction for pooled connection
   🔓 Released lock for pooled connection

[TEST] ✅ Response received in 7.50s
  - Response ID: resp_b3c814b9502c
  - Status: completed

[RESPONSE] You like the show Cowboy Bebop.  You like Sara. Your name is Hassan.

✅ Response ID saved: resp_b3c814b9502c
================================================================================

Current settings:
  Backend: pooler
  Model: gemini-1.5-flash
  Conversation ID: resp_b3c814b9502c

Commands:
  /backend <name>  - Switch backend (pooler/local/sqlite)
  /model <name>    - Switch model
  /new             - Start new conversation
  /instructions    - Set system instructions
  /test            - Test current setup with a simple message
  /alternate       - Test alternating between GPT and Gemini
  /quit            - Exit

  Or just type your message...